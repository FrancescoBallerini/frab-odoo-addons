<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="city_nuts3_csv_import_form" model="ir.ui.view">
        <field name="name">Cities/NUTS3 Synchronization: Form</field>
        <field name="model">city.nuts3.sync</field>
        <field name="arch" type="xml">
            <form>
                <h2>To allow synchronization the current database has to match following requirements:</h2>
                <br/>
                <div>
                    <ul>
                        <li>you have to download city records for a country, from
                            <a href="https://github.com/OCA/partner-contact/tree/14.0/base_location_geonames_import"
                               class="oe_link" target="_blank">
                                base_location_geonames_import
                            </a>(check module usage for
                            more info)
                        </li>
                        <br/>
                        <li>you also have to download NUTS data for all countries from <a
                                href="https://github.com/OCA/partner-contact/tree/14.0/base_location_nuts"
                                class="oe_link" target="_blank">
                            base_location_nuts
                        </a> (check module usage for more info)
                        </li>
                        <br/>
                        <li>
                            On NUTS Items: for every country which for you want to map cities with NUTS 3, you already
                            must have synchronized level 4 NUTS data with Odoo state ids for that country
                            <span>
                                <button name="click_step_3_hints"
                                        type="object"
                                        icon="fa-info btn-primary"/>
                            </span>

                            <field name="show_step3_hints" invisible="1"/>
                            <br/>
                            <br/>
                            <ul attrs="{'invisible': [('show_step3_hints', '=', False)]}">
                                <h5>Hints:</h5>
                                <li>
                                    If country's states of your interest are covered by "Odoo Federal States" you might be able to
                                    automatically map country's level 4 NUTS with states by installing specific
                                    localization module for that country.
                                    Check <a href="https://github.com/OCA?q=l10n&amp;type=all&amp;language=&amp;sort="
                                             class="oe_link" target="_blank">OCA localization
                                </a> to find proper l10n repository
                                </li>
                                <br/>
                                <li>
                                    Otherwise you can either make a custom import or even set it manually from GUI.
                                    <b>To set manually from GUI:</b>

                                    Go on NUTS items view on menu "Contacts/Configuration/NUTS Items" and apply a "groupby:
                                    country > level" filter. Once filter is applied, identify the country group of your
                                    interest, then click on country's level 4 group.
                                    Now make sure to remove the max records limit on the right side of the row (e.g. if you
                                    see 1/80 click on it and set 1/120 to avoid filter out country's level 4 NUTS records).
                                    Then click on the first record, it will open the whole recordset of NUTS level 4 records for
                                    the country of your interest. Slide it one by one and sync each NUTS level 4 country's records
                                    to the respective "state_id". Create the 'state' if you miss it from your database.
                                </li>
                            </ul>

                        </li>
                    </ul>
                </div>
                <footer>
                    <button
                            name="run_city_nuts3_sync"
                            type="object"
                            class="btn-primary"
                            string="Import"
                    />
                    <button special="cancel" string="Cancel" class="oe_link"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="action_city_nuts3_sync" model="ir.actions.act_window">
        <field name="name">Cities/NUTS3 Synchronization</field>
        <field name="res_model">city.nuts3.sync</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

    <menuitem
            id="menu_action_city_nuts3_sync"
            action="action_city_nuts3_sync"
            parent="contacts.menu_localisation"
            sequence="99"
    />

</odoo>
